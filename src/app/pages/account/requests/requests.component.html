<!-- Header-->
<app-header id="top"></app-header>

<!-- Page content-->
<div class="container pt-5 pb-lg-4 mt-5 mb-sm-2">
  <!-- Breadcrumb-->
  <app-breadcrumbs [breadcrumbItems]="breadCrumbItems"></app-breadcrumbs>

  <!-- Page content-->
  <div class="row">
    <!-- Sidebar-->
    <aside class="col-lg-4 col-md-5 pe-xl-4 mb-5">
      <!-- Account nav-->
      <div class="card card-body border-0 shadow-sm pb-1 me-lg-1">
        <div class="d-flex d-md-block d-lg-flex align-items-start pt-lg-2 mb-4"><img class="rounded-circle" src="assets/img/avatars/03.jpg" width="48" alt="Annette Black">
          <div class="pt-md-2 pt-lg-0 ps-3 ps-md-0 ps-lg-3">
            <h2 class="fs-lg mb-0">Annette Black</h2><span class="star-rating"><i class="star-rating-icon fi-star-filled active"></i><i class="star-rating-icon fi-star-filled active"></i><i class="star-rating-icon fi-star-filled active"></i><i class="star-rating-icon fi-star-filled active"></i><i class="star-rating-icon fi-star-filled active"></i></span>
            <ul class="list-unstyled fs-sm mt-3 mb-0">
              <li><a class="nav-link fw-normal p-0" href="tel:3025550107"><i class="fi-phone opacity-60 me-2"></i>(302) 555-0107</a></li>
              <li><a class="nav-link fw-normal p-0" href="mailto:annette_black@email.com"><i class="fi-mail opacity-60 me-2"></i>annette_black@email.com</a></li>
            </ul>
          </div>
        </div>
        <div class="collapse d-md-block mt-3" id="account-nav">
          <div class="card-nav">
            <a class="card-nav-link" routerLink="/account/info"><i class="fi-user opacity-60 me-2"></i>Personal Info</a>
            <a class="card-nav-link" routerLink="/account/security"><i class="fi-lock opacity-60 me-2"></i>Password &amp; Security</a>
            <a class="card-nav-link active" routerLink="/account/properties"><i class="fi-home opacity-60 me-2"></i>My Properties</a>
            <a class="card-nav-link" routerLink="/account/wishlist"><i class="fi-heart opacity-60 me-2"></i>Wishlist</a>
            <a class="card-nav-link" routerLink="/account/reviews"><i class="fi-star opacity-60 me-2"></i>Reviews</a>
            <a class="card-nav-link" routerLink="/account/req"><i class="fa fa-paper-plane-o opacity-60 me-2" aria-hidden="true"></i>Requests</a>
            <a class="card-nav-link" routerLink="/account/notifications"><i class="fi-bell opacity-60 me-2"></i>Messages</a>
            <a class="card-nav-link" routerLink="/pages/help-center"><i class="fi-help opacity-60 me-2"></i>Help</a>
            <a class="card-nav-link" routerLink="/auth/signin"><i class="fi-logout opacity-60 me-2"></i>Sign Out</a>
          </div>
        </div>

      </div>
    </aside>
    <!-- Content-->
     <!-- Content-->
     <div class="col-lg-8 col-md-7 mb-5">
      <div class="d-flex align-items-center justify-content-between mb-3">
        <h1 class="h2 mb-0">My Requestes</h1><a class="fw-bold text-decoration-none" href="javascript:void(0);"><i class="fi-trash mt-n1 me-2"></i>Delete all</a>
      </div>
      <p class="pt-1 mb-4">Here you can see your  offers and acceptt them easily.</p>
      <!-- Nav tabs-->
      <ul ngbNav #nav="ngbNav" [activeId]="1" class="nav nav-tabs border-bottom mb-4">
        <li [ngbNavItem]="1" class="nav-item mb-3">
            <a ngbNavLink>
              <i class="fi-file fs-base me-2"></i>sent
            </a>
            <ng-template ngbNavContent>
              <!-- sented-->
              <main class="py-6 bg-surface-secondary">
                <div class="container-fluid">
        
                  <div class="card shadow border-0 mb-7">
          
                    <div class="table-responsive">
                        <table class="table table-hover table-nowrap">
                            <thead class="thead-light">
                                <tr>
                                    <th scope="col">Advertisement</th>
                                   
                                    <th scope="col">Date</th>
                                    <th scope="col">Amount</th>
                                    <th scope="col">Statue</th>
                                    <th></th>
                                </tr>
                            </thead>
                            <tbody>
                                <tr *ngFor="let se of sented; index as i">
                                  <td> <a class="text-heading font-semibold" href="#"> {{se.title}} </a> </td>
                                    <td>{{se.created_at| date:'short'}}</td>
                       
                                  
                                    <td> ${{se.price}} </td>
                                    <td [ngSwitch]="se.statue">
                                       <span  *ngSwitchCase="'waiting'" class="badge badge-pill wa">{{se.statue}}</span>
                                       <span  *ngSwitchCase="'accepted'" class="badge badge-pill ac">{{se.statue}}</span>
                                       <span  *ngSwitchCase="'rejected'" class="badge badge-pill re">{{se.statue}}</span>                                 
                                      </td>
                                    <td class="text-end" [ngSwitch]="se.statue"> 
                                      <button  *ngSwitchCase="'accepted'"  class="btn btn-sm btn-neutral btc" (click)="pay(se.adver_id,se.user_id,se.price,i)" >confirm payment</button>
                                      <button  *ngSwitchCase="'rejected'"  class="btn btn-sm btn-neutral bta"  (click)="req_again(se.req_id,i)">request again</button>
                                      <button (click)="cancel(se.req_id,i)" class="btn btn-sm btn-danger ms-3">Cancel </button> </td>
                                </tr>
          
                            </tbody>
                        </table>
                    </div>
                </div>
                </div>
               
            </main>
            </ng-template>
        </li>
        <li [ngbNavItem]="2" class="nav-item mb-3">
          <a ngbNavLink>
            <i class="fi-file-clean fs-base me-2"></i>Recived
          </a>
          <ng-template ngbNavContent>
            <!-- recived-->
            <main class="py-6 bg-surface-secondary">
              <div class="container-fluid">
        
                <div class="card shadow border-0 mb-7">
        
                  <div class="table-responsive">
                      <table class="table table-hover table-nowrap">
                          <thead class="thead-light">
                              <tr>
                                  <th scope="col">Person</th>
                                 
                                  <th scope="col">Advertisement</th>
                                  <th scope="col">Amount</th>
                                  <th scope="col">Statue</th>
                                  <th></th>
                              </tr>
                          </thead>
                          <tbody>
                              <tr *ngFor="let re of recived; index as i">
                                  <td> {{re.name}}  </td>
                     
                                  <td> <a class="text-heading font-semibold" href="#">{{re.title}}  </a> </td>
                                  <td> $${{re.price}}</td>
                                  <td > <span class="badge badge-pill wait">waiting</span></td>
                                  <td class="text-end"> <button (click)="confirm(re.req_id,i)"  class="btn btn-sm btn-neutral">confirm </button><button (click)="reject(re.req_id,i)" class="btn btn-sm btn-danger ms-3">Reject</button> </td>
                              </tr>
        
                          </tbody>
                      </table>
                  </div>
              </div>
              </div>
          </main>
          </ng-template>
        </li>
       
      </ul>
      <div [ngbNavOutlet]="nav"></div>
    </div>

</div>
</div>

  <!-- Footer-->
  <app-footer></app-footer>
